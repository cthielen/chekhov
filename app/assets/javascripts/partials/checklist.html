<div class="alert alert-success affix" style="bottom: 0; right: 15px;" ng-show="saved">
  <strong>{{saved}}</strong>
</div>

<div class="row-fluid" ng-show="loaded">
  <p class="text-info span10">Using checklist '{{ checklist.template_name }}'</h4>
  <h1 class="span10">
    {{ checklist.name }}
    <span class="pull-right badge" ng-show="checklist.finished">
      Completed: {{ checklist.finished | date:'short' }}</span>
  </h1>
</div>

<div class="row-fluid" ng-show="loaded" style="margin-top: 25px;">
  <div class="span5 offset1">
    <div class="input-prepend">
      <span class="add-on">SysAid Ticket #</span>
      <input type="text" ng-model="checklist.ticket_number" placeholder="SysAid Ticket #"
        ng-change="saveAfterDelay()" on-blur="saveChanges()"></input>
    </div>
  </div>
  <div class="span5">
    <div class="btn-group pull-right" ng-show="user.is_admin || user.id == checklist.user_id">
        <button type="button" class="btn btn-info" ng-model="checklist.public" btn-radio="true" ng-click="togglePublic()">Public</button>
        <button type="button" class="btn btn-info" ng-model="checklist.public" btn-radio="false" ng-click="togglePublic()">Not Public</button>
    </div>
  </div>
</div>

<div class="row-fluid" style="margin-top: 2em;">
  <div class="span10 offset1">
    <div class="alert alert-error" ng-show="error">
      <button type="button" class="close" ng-click="clearError()">&times;</button>
      <div ng-bind-html="error"></div>
    </div>

    <div class="row text-center" ng-hide="loaded" id="loading"><img src="assets/ajax-loader.gif"></div>
    <table class="table table-hover" id="entries" ng-show="loaded">
      <tbody>
        <tr ng-repeat="entry in checklist.entries_attributes" ng-click="check(entry)">
          <td><input type="checkbox" ng-model="entry.checked" style="pointer-events: none;"></input></td>
          <td><span class="pull-right" style="padding-top: 1.5em; color: #999; padding-right: 3em;">{{entry.user_name}}<br />{{entry.finished | date:'short'}}</span><h3>{{$index+1}}. {{ entry.content }}</h3></td>
        </tr>
        <tr>
          <td colspan="2">
            Comments:
            <textarea class="span12" ng-model="checklist.comments" ng-change="saveAfterDelay()" on-blur="saveChanges()"></textarea>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
